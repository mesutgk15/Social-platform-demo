{% extends "index.html" %}

{% block title %} - Home {% endblock %}

{% block main %}

    {% if get_flashed_messages %}

        {% with messages = get_flashed_messages() %}

            {% for message in messages %}

                <div class="mb-3 error-flash">{{ message }}</div>

            {% endfor %}

        {% endwith %}

    {% endif %}

    <h4 class="text-center mb-3">Profile </h4>
    {% for profile_data in profile_data %}
    <div>
        <div style="border: solid; width: 60vw;" class="container profile-section">
            <div class="profile-section mt-3">Profile Picture</div>
            {% if os.path.exists('static/profile_pictures/' + (session['user_id'] | string) + '.jpg') %}
                <img style="padding-top: 15px; padding-bottom: 15px; width: 5rem;" src="{{ url_for('static', filename='profile_pictures/' + (session['user_id'] | string ) + '.jpg' ) }}" class="card-img-top" alt="...">
            {% else %}
                <img style="padding-top: 15px; padding-bottom: 15px; width: 5rem;" src="{{ url_for('static', filename='profile_pictures/user.png') }}" class="card-img-top" alt="...">
            {% endif %}
            <form action="{{ url_for('upload_photo', photo='upload') }}" method="post" enctype="multipart/form-data">
                <div class="input-group mb-3">
                    <input class="form-control" type="file" name="photo" id="pp">
                    <button class="input-group-text" type="submit">Upload</button>        
                </div>
            </form>
            <a style="height: 3em; width: 5em;" class="btn btn-outline-danger btn-sm mb-3" href="{{ url_for('upload_photo', photo='delete') }}">Delete</a>
        </div>
        
        <div style="border: solid; width: 60vw;" class="container profile-section">
            <span class="profile-section">Address:</span>
            {% if profile_data['address'] %}
                <span>{{profile_data['address']}}</span>
            {% else %}
                <span></span>
            {% endif %}
            <a style="height: 3em; width: 8em; margin-inline-start: 30em; margin-top: 15px; margin-bottom: 15px;" class="btn btn-outline-primary btn-sm" href="http://">Update</a>
            <a style="height: 3em; width: 5em;" class="btn btn-outline-danger btn-sm" href="http://">Delete</a>
        </div>
        <div style="border: solid; width: 60vw;" class="container profile-section">
            <span class="profile-section">Phone Number:</span>
            {% if profile_data['phone_number'] %}
                <span>{{profile_data['phone_number']}}</span>
            {% else %}
                <span></span>
            {% endif %}
            <a style="height: 3em; width: 8em; margin-inline-start: 26.5em; margin-top: 15px; margin-bottom: 15px;" class="btn btn-outline-primary btn-sm" href="http://">Update</a>
            <a style="height: 3em; width: 5em;" class="btn btn-outline-danger btn-sm" href="http://">Delete</a>
        </div>
        <div style="border: solid; width: 60vw; padding: 15px;" class="container profile-section">
            <span class="profile-section">Email:</span>
            <span style="margin-inline-start: 25em;">{{profile_data['email']}}</span>

        </div>
    </div>
    {% endfor %}

{% endblock %}